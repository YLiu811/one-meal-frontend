{"ast":null,"code":"var _jsxFileName = \"/Users/yliu88/Developer/projects/Capstone/One-Meal-Front-End/front-end-one-meal-capstone/one-meal-app/src/pages/FavoritesList.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\n// import Recipe from \"./Recipe\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FavoritesList = () => {\n  _s();\n  const [favList, setFavList] = useState([]);\n  // get favorits from DB\n  const fetchFavorits = async () => {\n    let user_id = localStorage.getItem(\"userId\");\n    if (user_id) {\n      try {\n        await axios.get(`${process.env.REACT_APP_BACKEND_URL}/user/${user_id}/favorites`).then(response => {\n          console.log(response);\n          setFavList(response.data);\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n  useEffect(() => {\n    fetchFavorits();\n  }, []);\n  //   delete one favorit\n  const deletefav = favId => {\n    console.log(\"delete called\");\n    console.log({\n      favId\n    });\n    axios.delete(`${process.env.REACT_APP_BACKEND_URL}/favorites/${favId}`).then(() => {\n      const newFavsList = [];\n      for (const fav of favList) {\n        if (fav.id !== favId) {\n          newFavsList.push(fav);\n        }\n      }\n      setFavList(newFavsList);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), favList.map((fav, i) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [fav.title, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: `/recipe/${fav.recipe_id}`,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: fav.image,\n              alt: fav.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"deletebook\",\n          onClick: () => {\n            deletefav(fav.id);\n          },\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true);\n};\n_s(FavoritesList, \"Db0VGMNOMcaSHoU7tqzB1CTyUME=\");\n_c = FavoritesList;\nexport default FavoritesList;\nvar _c;\n$RefreshReg$(_c, \"FavoritesList\");","map":{"version":3,"names":["useState","useEffect","axios","FavoritesList","favList","setFavList","fetchFavorits","user_id","localStorage","getItem","get","process","env","REACT_APP_BACKEND_URL","then","response","console","log","data","error","deletefav","favId","delete","newFavsList","fav","id","push","catch","map","i","title","recipe_id","image"],"sources":["/Users/yliu88/Developer/projects/Capstone/One-Meal-Front-End/front-end-one-meal-capstone/one-meal-app/src/pages/FavoritesList.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\n// import Recipe from \"./Recipe\";\nconst FavoritesList = () => {\n  const [favList, setFavList] = useState([]);\n  // get favorits from DB\n  const fetchFavorits = async () => {\n    let user_id = localStorage.getItem(\"userId\");\n    if (user_id) {\n      try {\n        await axios\n          .get(`${process.env.REACT_APP_BACKEND_URL}/user/${user_id}/favorites`)\n          .then((response) => {\n            console.log(response);\n            setFavList(response.data);\n          });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n  useEffect(() => {\n    fetchFavorits();\n  }, []);\n  //   delete one favorit\n  const deletefav = (favId) => {\n    console.log(\"delete called\");\n    console.log({ favId });\n    axios\n      .delete(`${process.env.REACT_APP_BACKEND_URL}/favorites/${favId}`)\n      .then(() => {\n        const newFavsList = [];\n        for (const fav of favList) {\n          if (fav.id !== favId) {\n            newFavsList.push(fav);\n          }\n        }\n        setFavList(newFavsList);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  return (\n    <>\n      <br />\n      {favList.map((fav, i) => {\n        return (\n          <div className=\"list\" key={i}>\n            <p>\n              {fav.title}\n              <br />\n              <a href={`/recipe/${fav.recipe_id}`}>\n                <img src={fav.image} alt={fav.title} />\n              </a>\n              <br />\n            </p>\n            <button\n              className=\"deletebook\"\n              onClick={() => {\n                deletefav(fav.id);\n              }}\n            >\n              Delete\n            </button>\n          </div>\n        );\n      })}\n    </>\n  );\n};\n\nexport default FavoritesList;\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AAAA;AAAA;AACA,MAAMC,aAAa,GAAG,MAAM;EAAA;EAC1B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EAC1C;EACA,MAAMM,aAAa,GAAG,YAAY;IAChC,IAAIC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAC5C,IAAIF,OAAO,EAAE;MACX,IAAI;QACF,MAAML,KAAK,CACRQ,GAAG,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,qBAAsB,SAAQN,OAAQ,YAAW,CAAC,CACrEO,IAAI,CAAEC,QAAQ,IAAK;UAClBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;UACrBV,UAAU,CAACU,QAAQ,CAACG,IAAI,CAAC;QAC3B,CAAC,CAAC;MACN,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdH,OAAO,CAACC,GAAG,CAACE,KAAK,CAAC;MACpB;IACF;EACF,CAAC;EACDlB,SAAS,CAAC,MAAM;IACdK,aAAa,EAAE;EACjB,CAAC,EAAE,EAAE,CAAC;EACN;EACA,MAAMc,SAAS,GAAIC,KAAK,IAAK;IAC3BL,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAC5BD,OAAO,CAACC,GAAG,CAAC;MAAEI;IAAM,CAAC,CAAC;IACtBnB,KAAK,CACFoB,MAAM,CAAE,GAAEX,OAAO,CAACC,GAAG,CAACC,qBAAsB,cAAaQ,KAAM,EAAC,CAAC,CACjEP,IAAI,CAAC,MAAM;MACV,MAAMS,WAAW,GAAG,EAAE;MACtB,KAAK,MAAMC,GAAG,IAAIpB,OAAO,EAAE;QACzB,IAAIoB,GAAG,CAACC,EAAE,KAAKJ,KAAK,EAAE;UACpBE,WAAW,CAACG,IAAI,CAACF,GAAG,CAAC;QACvB;MACF;MACAnB,UAAU,CAACkB,WAAW,CAAC;IACzB,CAAC,CAAC,CACDI,KAAK,CAAER,KAAK,IAAK;MAChBH,OAAO,CAACC,GAAG,CAACE,KAAK,CAAC;IACpB,CAAC,CAAC;EACN,CAAC;EAED,oBACE;IAAA,wBACE;MAAA;MAAA;MAAA;IAAA,QAAM,EACLf,OAAO,CAACwB,GAAG,CAAC,CAACJ,GAAG,EAAEK,CAAC,KAAK;MACvB,oBACE;QAAK,SAAS,EAAC,MAAM;QAAA,wBACnB;UAAA,WACGL,GAAG,CAACM,KAAK,eACV;YAAA;YAAA;YAAA;UAAA,QAAM,eACN;YAAG,IAAI,EAAG,WAAUN,GAAG,CAACO,SAAU,EAAE;YAAA,uBAClC;cAAK,GAAG,EAAEP,GAAG,CAACQ,KAAM;cAAC,GAAG,EAAER,GAAG,CAACM;YAAM;cAAA;cAAA;cAAA;YAAA;UAAG;YAAA;YAAA;YAAA;UAAA,QACrC,eACJ;YAAA;YAAA;YAAA;UAAA,QAAM;QAAA;UAAA;UAAA;UAAA;QAAA,QACJ,eACJ;UACE,SAAS,EAAC,YAAY;UACtB,OAAO,EAAE,MAAM;YACbV,SAAS,CAACI,GAAG,CAACC,EAAE,CAAC;UACnB,CAAE;UAAA,UACH;QAED;UAAA;UAAA;UAAA;QAAA,QAAS;MAAA,GAhBgBI,CAAC;QAAA;QAAA;QAAA;MAAA,QAiBtB;IAEV,CAAC,CAAC;EAAA,gBACD;AAEP,CAAC;AAAC,GApEI1B,aAAa;AAAA,KAAbA,aAAa;AAsEnB,eAAeA,aAAa;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}